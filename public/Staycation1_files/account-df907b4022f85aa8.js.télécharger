(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3774],{3717:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return n(51585)}])},24329:function(e,t,n){"use strict";n.d(t,{q:function(){return Avatar}});var a=n(85893),o=n(81279),i=n(97733),r=n(22321),l=n(78954),s=n.n(l);let Avatar=e=>{let{path:t,size:n="m"}=e;return t?(0,a.jsx)("div",{className:s().avatar,style:{width:r.Y[n],height:r.Y[n]},children:(0,a.jsx)(o.E,{img:t,alt:"avatar",withinSubDirectory:!0})}):(0,a.jsx)(i.KT,{size:n})}},4974:function(e,t,n){"use strict";n.d(t,{$:function(){return c}});var a=n(85893),o=n(67294),i=n(29806),r=n(91905),l=n(20211),s=n.n(l);let c=(0,o.forwardRef)(function(e,t){let{...n}=e,o=(0,i.d)();return(0,a.jsx)(r.I,{type:"date",ref:t,onClick:e=>{(null==o?void 0:o.isMobile)||e.preventDefault(),n.onClick&&n.onClick(e)},className:s().datePicker,...n})})},6874:function(e,t,n){"use strict";n.d(t,{R:function(){return Listbox}});var a=n(85893),o=n(28568),i=n(95389),r=n(94184),l=n.n(r),s=n(28481),c=n(37432),u=n(10678),d=n.n(u);let Listbox=e=>{let{items:t,selectedValue:n,onChange:r,label:u,leftElement:m,errorMessage:h}=e,f=!!h;return(0,a.jsx)("div",{className:d().container,children:(0,a.jsx)(o.Ri,{value:n,onChange:r,children:e=>{let{open:r}=e;return(0,a.jsxs)(a.Fragment,{children:[u&&(0,a.jsx)(i.__,{children:(0,a.jsx)(c.A,{fontSize:"large",fontWeight:"medium",color:f?"destructive":"primary",children:u})}),(0,a.jsx)(o.Y4,{className:l()(d().button,{[d().buttonWithLeftElement]:m,[d().buttonInError]:f}),children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:d().leftElement,children:[m&&(0,a.jsx)("div",{className:d().iconContainer,children:m}),(0,a.jsx)(c.A,{fontSize:"large",fontWeight:"regular",children:null==n?void 0:n.label})]}),(0,a.jsx)("span",{className:l()(d().caret,{[d().caretOpen]:r}),children:(0,a.jsx)(s.J,{name:"caret-down",variant:"line",size:"s",color:f?"destructive":"primary"})})]})}),f&&(0,a.jsx)(c.A,{fontSize:"medium",fontWeight:"regular",color:f?"destructive":"tertiary",children:h}),(0,a.jsx)(o.O_,{className:d().options,modal:!1,children:t.map(e=>(0,a.jsx)(o.wt,{value:e,className:l()(d().option,{[d().optionWithLeftElement]:!!e.icon}),children:(0,a.jsxs)(a.Fragment,{children:[e.icon&&(0,a.jsx)("div",{className:d().iconContainer,children:(0,a.jsx)(s.J,{...e.icon,size:"m"})}),(0,a.jsx)(c.A,{fontSize:"large",fontWeight:"regular",children:e.label})]})},e.label))})]})}})})}},40144:function(e,t,n){"use strict";n.d(t,{Y:function(){return u}});var a=n(85893),o=n(94184),i=n.n(o),r=n(67294),l=n(37432),s=n(64864),c=n.n(s);let u=(0,r.forwardRef)(function(e,t){let{disabled:n=!1,onChange:o,label:r,id:s,name:u,value:d,...m}=e;return(0,a.jsxs)("label",{htmlFor:s,className:c().radioContainer,children:[(0,a.jsx)("input",{ref:t,type:"radio",className:i()(c().radio),onChange:o,disabled:n,name:u,id:s,value:d,...m}),!!r&&(0,a.jsx)(l.A,{fontSize:"large",fontWeight:"regular",color:n?"secondary-on-accent":void 0,children:r})]})})},61250:function(e,t,n){"use strict";n.d(t,{h:function(){return g}});var a=n(85893),o=n(2740),i=n(58965),r=n(94184),l=n.n(r),s=n(67294),c=n(85518),u=n(7419),d=n(15385),m=n(91905),h=n(47543),f=n.n(h);let g=s.forwardRef(function(e,t){let{value:n,options:r,onChange:h,onSearchChange:g,renderItem:p,keyExtractor:x,displayValue:v,popoverClassName:_,inputClassName:b,name:j,disabled:C,isLoading:S,...y}=e,{styles:w,attributes:N,referenceRef:P,popperRef:I}=(0,d.D)({placement:"bottom-start",gutter:8,matchWidth:!0}),k=!(0,u.F)(),L=c.isSafari&&k?s.Fragment:o.h_;return(0,a.jsx)("div",{className:f().comboboxContainer,children:(0,a.jsxs)(i.hQ,{value:n,onChange:h,name:j,disabled:C,children:[(0,a.jsx)(i.gA,{ref:t,as:m.I,containerRef:P,onChange:g,displayValue:e=>e?v(e):"",name:j,className:b,isLoading:S,autoComplete:"off",...y}),r.length>0&&(0,a.jsx)(L,{children:(0,a.jsx)("div",{ref:I,className:l()(f().popover,_),style:w.popper,...N.popper,children:(0,a.jsx)(i.L5,{className:f().optionList,modal:!1,children:r.map(e=>(0,a.jsx)(i.O2,{value:e,className:f().option,children:p(e)},x(e)))})})})]})})})},40358:function(e,t,n){"use strict";n.d(t,{N:function(){return useRequestPasswordReset}});var a=n(36759);function useRequestPasswordReset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.r)({path:"/account/forgot-password"},e)}},18875:function(e,t,n){"use strict";n.d(t,{C:function(){return useAPIDeleteMutation}});var a=n(98029),o=n(30795),i=n(77015),r=n(45331),l=n(67341);function useAPIDeleteMutation(e){let{schema:t,onSuccess:n,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:c}=(0,o.a)();return(0,a.D)({...s,mutationFn:async t=>((0,l.cW)(c),(0,i.qS)({...e,token:c,payload:t})),onSuccess:async(a,o,i)=>{t&&e&&(a=(0,r.j)(a,t,{method:"DELETE",path:e.path})),n&&await n(a,o,i)}})}},27648:function(e,t,n){"use strict";n.d(t,{o:function(){return useSearchableCountrySlugs}});var a=n(67294),o=n(46204),i=n(32585);function useSearchableCountrySlugs(){let{data:e}=(0,o.F)(),t=(0,a.useMemo)(()=>e?(0,i.hQ)(e):void 0,[e]);return t}},85090:function(e,t,n){"use strict";n.d(t,{_:function(){return CitySearch}});var a=n(85893),o=n(67294),i=n(86501),r=n(49460);let useGeolocation=e=>{let[t,n]=(0,o.useState)({loaded:!1,coordinates:{lat:null,lgt:null},error:{}}),a=(0,o.useCallback)(e=>{n(t=>({...t,loaded:!0,coordinates:{lat:e.coords.latitude,lgt:e.coords.longitude}}))},[]),i=(0,o.useCallback)(e=>{n(t=>({...t,loaded:!0,error:{code:e.code,message:e.message}}))},[]);return(0,o.useEffect)(()=>{e&&("geolocation"in navigator?navigator.geolocation.getCurrentPosition(a,i):n(e=>({...e,error:{code:0,message:"Geolocation not supported"}})))},[e,a,i]),t};var l=n(67043),s=n(27648),c=n(97537),u=n(20214),d=n(28734),m=n(67341),h=n(28481),f=n(61250),g=n(34617),p=n(78495);let CitySearch=e=>{let{onSelect:t,initialValue:n,prefillCity:x=!1,...v}=e,{t:_}=(0,c.$)(),[b,j]=(0,o.useState)(()=>n?{bbox:[0,0,0,0],center:[0,0],place_name:"",context:[],id:"",place_type:[],relevance:0,text:n,type:""}:null),[C,S]=(0,o.useState)(!1),[y,w]=(0,o.useState)(!1),N=(0,l.b)(),[P,I]=(0,o.useState)(""),[k]=(0,r.nj)(P,350),[L,D]=(0,o.useState)([]),A=useGeolocation(y),[E,z]=(0,o.useState)(),F=(0,s.o)(),geolocationToast=()=>{let e=_("common:geolocation.errorTitle"),t=_("common:geolocation.error");i.ZP.custom(n=>(0,a.jsx)(g.F,{title:e,message:t,icon:{name:"warning",variant:"line"},param:n}))},hasBrowserGeolocationPermission=async()=>{var e,t;return(await (null===(t=navigator)||void 0===t?void 0:null===(e=t.permissions)||void 0===e?void 0:e.query({name:"geolocation"}))).state},M=(0,o.useCallback)(e=>{j(e),t(e),z(e)},[t]);(0,o.useEffect)(()=>{let fetchLocation=async()=>{if(!k||!F)return;let e=await (0,d.hx)({search:k,locale:N,countrySlugs:F});D(e)};fetchLocation()},[k,N,F]),(0,o.useEffect)(()=>{if(!A.loaded)return;A.error.message&&S(!1);let{lgt:e,lat:t}=A.coordinates;if(!(0,m.$K)(e)||!(0,m.$K)(t))return;let setLocalityFromCoordinates=async()=>{let n=await (0,d.KN)({lng:e,lat:t},N);n&&(M(n),S(!1))};setLocalityFromCoordinates()},[A,M,_,N]);let onIconClick=async()=>{if(b)M(null);else{let e=await hasBrowserGeolocationPermission();if("denied"===e){geolocationToast(),w(!0);return}A.loaded?E?M(E):geolocationToast():(w(!0),S(!0))}};return(0,o.useEffect)(()=>{let prefillUserLocation=async()=>{let e=await hasBrowserGeolocationPermission();if("granted"===e&&w(!0),"prompt"===e){let e=await (0,u.EG)();if(e){let t=await (0,d.KN)({lng:e.lng,lat:e.lat},N);if(!t)return;M(t)}}};x&&prefillUserLocation()},[]),(0,a.jsx)(f.h,{id:"city-search",name:"city-search",options:L,onChange:e=>{M(e)},onSearchChange:e=>{b&&j(null),I(e.target.value)},keyExtractor:e=>e.id,value:b,displayValue:itemToString,renderItem:e=>{let{cityName:t,cityLocation:n}=formatItem(e);return(0,a.jsx)(p.S,{name:t,subtext:n})},isLoading:C,rightElement:(0,a.jsx)(h.f,{onClick:onIconClick,name:b?"cancel-circle":"location-target",variant:"line",size:"s"}),...v})};function itemToString(e){return formatItem(e).cityName}function formatItem(e){var t;return{cityName:e.text,cityLocation:null===(t=e.context)||void 0===t?void 0:t.map(e=>e.text).join(", ")}}},78495:function(e,t,n){"use strict";n.d(t,{S:function(){return SearchItemWithSubtext}});var a=n(85893),o=n(37432),i=n(44005),r=n.n(i);let SearchItemWithSubtext=e=>{let{name:t,subtext:n}=e;return(0,a.jsx)("div",{className:r().searchItemContainer,children:(0,a.jsxs)("div",{className:r().searchItem,children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)("span",{className:r().subtext,children:(0,a.jsx)(o.A,{fontSize:"medium",fontWeight:"regular",color:"secondary",children:n})})]})})}},54242:function(e,t,n){"use strict";n.d(t,{Z:function(){return MainLayout}});var a=n(85893),o=n(94184),i=n.n(o),r=n(7419),l=n(37432),s=n(46055),c=n(79602),u=n(84055),d=n(10009),m=n(82445),h=n.n(m);let MainLayout=e=>{let{children:t,hideFooterOnMobile:n=!1,maxWidthOnLargeScreen:o=!0,smallFooter:m=!1,footerMarginTop:f,mainClassName:g,navBarProps:p,isNavBarStickyOnMobile:x=!0,showAppStoreBanner:v,stickyNavBar:_=!0}=e,b=(0,r.F)(),j=(null==p?void 0:p.variant)==="transparent";return(0,a.jsx)(s.IE,{showAppStoreBanner:v,children:(0,a.jsxs)("div",{className:h().layout,children:[(b||x)&&_?(0,a.jsx)(d.b,{isTransparent:j,children:(0,a.jsx)(u.l,{...p})}):(0,a.jsx)(u.l,{...p}),(0,a.jsx)("main",{className:i()(h().main,g),children:(0,a.jsx)(l.A,{fontSize:"large",fontWeight:"regular",children:o?(0,a.jsx)(c.W,{children:t}):t})}),(0,a.jsx)("div",{className:i()({[h().hideFooterOnMobile]:n}),children:m?(0,a.jsx)(s.Q4,{}):(0,a.jsx)(s.$_,{footerMarginTop:f})})]})})}},51585:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return eD},default:function(){return eA}});var a=n(85893),o=n(25362),i=n(5815),r=n(54242),l=n(93144),s=n(30795),c=n(97537),u=n(78226),d=n(43716),m=n(83195),h=n(29147),f=n(53385),g=n(42699),p=n(83999),x=n(77382),v=n(67294),_=n(87536),b=n(86501),j=n(85411);function useAccountUpdate(e){let{onSuccess:t,...n}=e,{saveToken:a}=(0,s.a)();return(0,j.h)({path:"/account"},{...n,onSuccess:(e,n,o)=>{null==t||t(e,n,o),a(e)}})}var C=n(77015),S=n(94504),y=n(91905),w=n(24329),N=n(28481),P=n(59184),I=n.n(P);let InputAvatar=e=>{let{pictureId:t,onChange:n,onDelete:o,notice:i,id:r}=e,l=(0,v.useRef)(null);return(0,a.jsxs)("div",{className:I().container,children:[(0,a.jsxs)("div",{className:I().inputContainer,children:[(0,a.jsx)("input",{ref:l,type:"file",name:"file",accept:"image/png, image/gif, image/jpeg",id:r,onChange:n,className:I().inputElement}),(0,a.jsx)("label",{htmlFor:r,className:I().inputLabel,children:(0,a.jsx)(N.J,{name:"camera",size:"s",variant:"line",color:"primary-on-accent"})}),(0,a.jsx)(w.q,{path:t,size:"xl"})]}),(0,a.jsx)("div",{children:(0,a.jsx)(h.z,{variant:"ghost",onClick:()=>{l.current&&(l.current.value=""),o()},label:i})})]})};var k=n(4974),L=n(40144),D=n(9103),A=n.n(D);let upload=async(e,t)=>{let n=new FormData;n.append("file",e);let a=await (0,C.dD)({path:"/account/avatar",token:t,payload:n});return a},PersonalInformation=e=>{var t,n,o,i,r;let{user:l}=e,{t:u}=(0,c.$)(),{token:m}=(0,s.a)(),[f,j]=(0,v.useState)(l.avatarId),{register:C,handleSubmit:w,reset:N,formState:{isDirty:P,errors:I}}=(0,_.cI)({mode:"onTouched",defaultValues:getDefaultValues(l)}),{mutate:D,isPending:E}=useAccountUpdate({onSuccess(){b.ZP.success(u("account:success.generic"))},onError(){b.ZP.error(u("account:error.generic"))}});(0,v.useEffect)(()=>{N(getDefaultValues(l))},[l,N]);let onSubmit=async e=>{(0,d.kw)(),D({...l,...e,avatarId:f})},z=(!P||!!Object.keys(I).length)&&f===(null==l?void 0:l.avatarId);return(0,a.jsxs)("form",{onSubmit:w(onSubmit),children:[(0,a.jsx)("div",{className:A().inputAvatar,children:(0,a.jsx)(InputAvatar,{id:"avatarId",notice:u("account:avatar.delete"),pictureId:f,onDelete:()=>j(void 0),onChange:async e=>{try{var t;let n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n||!m)return;(0,d.TK)();let{pictureId:a}=await upload(n,m);j(a)}catch(e){b.ZP.error(u("account:error.upload"))}}})}),(0,a.jsxs)("div",{className:A().radios,children:[(0,a.jsx)(L.Y,{label:u("common:personalInformation.gender.male"),id:"Mr",value:"Mr",...C("gender")}),(0,a.jsx)(L.Y,{label:u("common:personalInformation.gender.female"),id:"Mrs",value:"Mrs",...C("gender")}),(0,a.jsx)(L.Y,{label:u("common:personalInformation.gender.other"),id:"Other",value:"Other",...C("gender")})]}),(0,a.jsxs)("div",{className:A().inputs,children:[(0,a.jsx)(y.I,{id:"firstname",label:u("common:personalInformation.firstname"),size:"large",...C("firstName",(0,S.T)(u("common:formValidation.inputRequired"))),errorMessage:null===(t=I.firstName)||void 0===t?void 0:t.message}),(0,a.jsx)(y.I,{id:"lastname",label:u("common:personalInformation.lastname"),size:"large",...C("lastName",(0,S.T)(u("common:formValidation.inputRequired"))),errorMessage:null===(n=I.lastName)||void 0===n?void 0:n.message}),(0,a.jsx)(y.I,{id:"phone",label:u("common:personalInformation.phone"),type:"tel",size:"large",...C("phoneNumber",{required:u("common:formValidation.inputRequired"),validate:e=>{let{isValid:t}=(0,x.phone)(e||"",{country:l.countrySlug});if(!t)return u("common:formValidation.invalidPhoneNumber")}}),errorMessage:null===(o=I.phoneNumber)||void 0===o?void 0:o.message}),(0,a.jsx)(y.I,{id:"email",label:u("common:personalInformation.email"),type:"email",size:"large",...C("email",{required:u("common:formValidation.inputRequired"),validate:e=>{if(!(0,p.G)(e||""))return u("common:formValidation.invalidEmail")}}),errorMessage:null===(i=I.email)||void 0===i?void 0:i.message}),(0,a.jsx)(k.$,{id:"birthdate",label:u("common:personalInformation.birthdate"),size:"large",...C("birthDate",{required:u("common:formValidation.inputRequired"),validate:e=>{if(e&&(0,g.Z)(new Date(e),new Date))return u("common:formValidation.invalidDate")}}),errorMessage:null===(r=I.birthDate)||void 0===r?void 0:r.message})]}),(0,a.jsx)("div",{className:A().button,children:(0,a.jsx)(h.z,{label:u("account:save"),type:"submit",disabled:z,loading:E})})]})};function getDefaultValues(e){return{birthDate:e.birthDate,email:e.email,firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber,gender:e.gender}}var E=n(11163),z=n(85090),F=n(76811),M=n(46204);let useSettingsUpdate=function(){let{onSuccess:e,onError:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mutateAsync:n,isPending:a}=function(){let{onSuccess:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{saveToken:n}=(0,s.a)();return(0,j.h)({path:"/account/location"},{...t,onSuccess:(t,a,o)=>{null==e||e(t,a,o),n(t)}})}(),{mutateAsync:o,isPending:i}=function(){let{onSuccess:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{saveToken:n}=(0,s.a)();return(0,j.h)({path:"/account/locale"},{...t,onSuccess:(t,a,o)=>{null==e||e(t,a,o),n(t)}})}({onSuccess:e,onError:t}),r=(0,v.useCallback)(async e=>{try{await n({location:e.location,clubId:e.clubId}),await o({locale:e.locale})}catch(e){null==t||t(e)}},[n,o,t]);return{mutate:r,isLoading:i||a}};var O=n(20214);n(85690);var R=n(39049);let getLanguagesFromCountries=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(getLanguageFromCountry).filter((e,t,n)=>{let{label:a,locale:o}=e;return t===n.findIndex(e=>e.label===a&&e.locale===o)}).sort((e,t)=>e.locale.localeCompare(t.locale))};function getLanguageFromCountry(e){return{label:(0,R.fm)(e.lang),locale:e.locale}}var W=n(28734),T=n(6874),V=n(75971),q=n.n(V);let Settings=e=>{let{user:t}=e,{data:n}=(0,M.F)(),{data:o}=(0,F.C)(),i=getLanguagesFromCountries(null!=n?n:[]),r=i.find(e=>e.locale===t.locale);return r&&o&&n?(0,a.jsx)(SettingsWithData,{initialLocation:t.location,languages:i,initialLanguague:r,clubs:o,countries:n}):null},SettingsWithData=e=>{let{languages:t,initialLanguague:n,initialLocation:o,clubs:i,countries:r}=e,{t:l,i18n:s}=(0,c.$)(),u=(0,E.useRouter)(),[m,f]=(0,v.useState)(n),[g,p]=(0,v.useState)({...o}),x=(0,v.useRef)(u.locale);(0,v.useEffect)(()=>{x.current!==u.locale&&(b.ZP.success(s.t("account:success.generic")),x.current=u.locale)},[u.locale,s]);let{mutate:_,isLoading:j}=useSettingsUpdate({onSuccess:()=>{if(m.locale!==u.locale){u.replace({pathname:"/account"},void 0,{locale:m.locale});return}b.ZP.success(l("account:success.generic"))},onError:()=>{b.ZP.error(l("account:settings.error"))}}),onSubmit=async e=>{e.preventDefault();let t=await (0,O.nD)({coords:g.coords,clubs:i,countries:r});t&&m.locale&&(m.locale!==n.locale&&(0,d.y9)({from:n.locale,to:m.locale}),g.locality!==o.locality&&(0,d.wv)({page:"account",from:o.locality,to:g.locality}),await _({locale:m.locale,clubId:t.id,location:g}))},C=g.locality!==o.locality||m.label!==n.label,S=(0,v.useCallback)(e=>{if(e){let t=(0,W.vn)(e);p(t)}else p({...o})},[o]);return(0,a.jsxs)("form",{onSubmit:onSubmit,children:[(0,a.jsxs)("div",{className:q().inputs,children:[(0,a.jsx)(z._,{label:l("account:settings.city"),size:"large",initialValue:o.locality,onSelect:S}),(0,a.jsx)(T.R,{items:t,selectedValue:m,onChange:f,label:l("account:settings.language")})]}),(0,a.jsx)("div",{className:q().button,children:(0,a.jsx)(h.z,{label:l("account:save"),type:"submit",disabled:!C,loading:j})})]})};var G=n(61009),Z=n(37432),B=n(45921),U=n(22523),K=n(63766),$=n(31147),Y=n(19322),X=n(94192),H=n(73781),J=n(14157),Q=n(23784),ee=n(30718),et=n(20391),en=n(12763),ea=n(64103),eo=n(57273),ei=n(18689),er=n(12351),el=n(39516),es=n(61363),ec=n(95389);let eu=(0,v.createContext)(null);eu.displayName="GroupContext";let ed=v.Fragment,em=Object.assign((0,er.yV)(function(e,t){var n;let a=(0,v.useId)(),o=(0,en.Q)(),i=(0,ee.B)(),{id:r=o||`headlessui-switch-${a}`,disabled:l=i||!1,checked:s,defaultChecked:c,onChange:u,name:d,value:m,form:h,autoFocus:f=!1,...g}=e,p=(0,v.useContext)(eu),[x,_]=(0,v.useState)(null),b=(0,v.useRef)(null),j=(0,Q.T)(b,t,null===p?null:p.setSwitch,_),C=(0,Y.L)(c),[S,y]=(0,$.q)(s,u,null!=C&&C),w=(0,X.G)(),[N,P]=(0,v.useState)(!1),I=(0,H.z)(()=>{P(!0),null==y||y(!S),w.nextFrame(()=>{P(!1)})}),k=(0,H.z)(e=>{if((0,ea.P)(e.currentTarget))return e.preventDefault();e.preventDefault(),I()}),L=(0,H.z)(e=>{e.key===es.R.Space?(e.preventDefault(),I()):e.key===es.R.Enter&&(0,ei.g)(e.currentTarget)}),D=(0,H.z)(e=>e.preventDefault()),A=(0,ec.wp)(),E=(0,el.zH)(),{isFocusVisible:z,focusProps:F}=(0,B.F)({autoFocus:f}),{isHovered:M,hoverProps:O}=(0,U.X)({isDisabled:l}),{pressed:R,pressProps:W}=(0,K.x)({disabled:l}),T=(0,v.useMemo)(()=>({checked:S,disabled:l,hover:M,focus:z,active:R,autofocus:f,changing:N}),[S,M,z,R,l,N,f]),V=(0,er.dG)({id:r,ref:j,role:"switch",type:(0,J.f)(e,x),tabIndex:-1===e.tabIndex?0:null!=(n=e.tabIndex)?n:0,"aria-checked":S,"aria-labelledby":A,"aria-describedby":E,disabled:l||void 0,autoFocus:f,onClick:k,onKeyUp:L,onKeyPress:D},F,O,W),q=(0,v.useCallback)(()=>{if(void 0!==C)return null==y?void 0:y(C)},[y,C]),G=(0,er.L6)();return v.createElement(v.Fragment,null,null!=d&&v.createElement(et.Mt,{disabled:l,data:{[d]:m||"on"},overrides:{type:"checkbox",checked:S},form:h,onReset:q}),G({ourProps:V,theirProps:g,slot:T,defaultTag:"button",name:"Switch"}))}),{Group:function(e){var t;let[n,a]=(0,v.useState)(null),[o,i]=(0,ec.bE)(),[r,l]=(0,el.fw)(),s=(0,v.useMemo)(()=>({switch:n,setSwitch:a}),[n,a]),c=(0,er.L6)();return v.createElement(l,{name:"Switch.Description",value:r},v.createElement(i,{name:"Switch.Label",value:o,props:{htmlFor:null==(t=s.switch)?void 0:t.id,onClick(e){n&&(eo.dz(e.currentTarget)&&e.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},v.createElement(eu.Provider,{value:s},c({ourProps:{},theirProps:e,slot:{},defaultTag:ed,name:"Switch.Group"}))))},Label:ec.__,Description:el.dk});var eh=n(94184),ef=n.n(eh),eg=n(92429),ep=n.n(eg);let ex=(0,v.forwardRef)(function(e,t){let{checked:n=!1,onChange:o,name:i}=e;return(0,a.jsx)(em,{checked:n,onChange:o,name:i,ref:t,children:(0,a.jsx)("div",{className:ef()(ep().toggle,{[ep().toggleOn]:n,[ep().toggleOff]:!n}),children:(0,a.jsx)("div",{className:ef()(ep().togglePoint,{[ep().togglePointOn]:n,[ep().togglePointOff]:!n})})})})});var ev=n(85990),e_=n.n(ev);let Notifications=e=>{let{user:t}=e,{t:n}=(0,c.$)(),{mutate:o}=useAccountUpdate({onError(){b.ZP.error(n("account:error.generic"))}}),onChange=async e=>{if(!t)return;(0,G.j)({amplitude:{name:"Toggle newsletter",params:{optin:e}}});let n={...t,optinNewsletter:e};o(n)};return(0,a.jsx)("div",{className:e_().container,children:(0,a.jsxs)("div",{className:e_().row,children:[(0,a.jsxs)("div",{className:e_().textContainer,children:[(0,a.jsx)(Z.A,{as:"h3",fontSize:"large",fontWeight:"medium",children:n("account:notifications.subTitleOne")}),(0,a.jsx)("div",{className:e_().notice,children:(0,a.jsx)(Z.A,{fontSize:"medium",fontWeight:"regular",color:"secondary",children:n("account:notifications.noticeOne")})})]}),(0,a.jsx)("div",{className:e_().containerSwitch,children:(0,a.jsx)(ex,{onChange:onChange,checked:null==t?void 0:t.optinNewsletter})})]})})};var eb=n(40358),ej=n(79499),eC=n.n(ej);let ChangePassword=e=>{let{user:t}=e,{t:n}=(0,c.$)(),o=(0,eb.N)({onSuccess:()=>{b.ZP.success(n("auth:forgottenPassword.confirmation.title"))},onError:()=>{b.ZP.error(n("auth:forgottenPassword.error.generic"))}}),tryRequestPasswordReset=async()=>{t&&o.mutate({email:t.email})};return(0,a.jsx)("div",{className:eC().container,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:eC().notice,children:(0,a.jsx)(Z.A,{as:"h3",fontSize:"medium",fontWeight:"regular",color:"secondary",children:n("account:password.notice")})}),(0,a.jsx)(h.z,{expand:!0,label:n("account:password.button"),onClick:tryRequestPasswordReset,loading:o.isPending})]})})};var eS=n(18875);let useAccountDelete=function(){let{onSuccess:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{logoutClientSide:n}=(0,s.a)(),a=(0,eS.C)({path:"/account"},{...t,onSuccess:async(t,a,o)=>{await (null==e?void 0:e(t,a,o)),n()}});return a};var ey=n(96744),ew=n(11960),eN=n(57214),eP=n(57180),eI=n.n(eP);let DeleteConfirmationModal=()=>{let e=(0,o.dd)(u.t3),{mutate:t,isPending:n}=useAccountDelete({onError:()=>{b.ZP.error(i("auth:deleteAccount.error.generic"))}}),{t:i}=(0,c.$)();return(0,a.jsxs)(eN.u_,{id:u.t3,size:"large",mobileBehavior:"inherit-desktop",children:[(0,a.jsx)(eN.xB,{children:(0,a.jsx)(ew.D,{title:i("account:delete.title"),className:eI().modalHeaderContainer,withDivider:!0,children:(0,a.jsx)(ew.F,{children:(0,a.jsx)(ey.h,{"aria-label":i("common:button.close"),icon:{name:"cancel",variant:"line"},onClick:e.hide})})})}),(0,a.jsx)(eN.fe,{children:(0,a.jsxs)("div",{className:eI().modalBodyContainer,children:[(0,a.jsx)(Z.A,{as:"p",fontSize:"large",fontWeight:"medium",children:i("account:delete.notice")}),(0,a.jsxs)("div",{className:eI().containerButton,children:[(0,a.jsx)(h.z,{label:i("common:button.cancel"),variant:"secondary",expand:!0,onClick:()=>e.hide()}),(0,a.jsx)(h.z,{expand:!0,label:i("common:button.confirm"),onClick:()=>{(0,d.mD)(),t(void 0),e.hide()},loading:n})]})]})})]})};var ek=n(76846),eL=n.n(ek);let Account=()=>{let{t:e}=(0,c.$)(),t=(0,o.dd)(u.t3),{user:n}=(0,s.a)();return n?(0,a.jsxs)("div",{className:eL().page,children:[(0,a.jsx)(m.I,{as:"h1",variant:"section",children:e("account:title")}),(0,a.jsxs)("div",{className:eL().section,children:[(0,a.jsx)(m.I,{as:"h2",variant:"subsection",children:e("account:personalInformation")}),(0,a.jsx)(PersonalInformation,{user:n})]}),(0,a.jsxs)("div",{className:eL().section,children:[(0,a.jsx)(m.I,{as:"h2",variant:"subsection",children:e("account:settings.title")}),(0,a.jsx)(Settings,{user:n})]}),(0,a.jsxs)("div",{className:eL().section,children:[(0,a.jsx)(m.I,{as:"h2",variant:"subsection",children:e("account:notifications.title")}),(0,a.jsx)(Notifications,{user:n})]}),(0,a.jsxs)("div",{className:eL().section,children:[(0,a.jsx)(m.I,{as:"h2",variant:"subsection",children:e("account:password.title")}),(0,a.jsx)(ChangePassword,{user:n})]}),(0,a.jsxs)("div",{className:eL().lastSection,children:[(0,a.jsx)(i.V,{href:{pathname:"/api/account/download"},children:(0,a.jsx)(f.r,{children:e("account:download")})}),(0,a.jsx)(h.z,{label:e("account:delete.button"),variant:"ghost",labelColor:"destructive",onClick:()=>{(0,d.sd)(),t.show()}})]}),(0,a.jsx)(DeleteConfirmationModal,{})]}):null};Account.getLayout=function(e){return(0,a.jsx)(r.Z,{children:e})},Account.getMeta=e=>{let{t}=e;return{title:t("account:meta.title"),description:t("account:meta.description"),altTitle:t("account:meta.altTitle"),altDescription:t("account:meta.altDescription"),image:l.L}};var eD=!0,eA=Account},94504:function(e,t,n){"use strict";n.d(t,{T:function(){return trimAndValidateString}});var a=n(39049);let trimAndValidateString=e=>({setValueAs:e=>"string"==typeof e?(0,a.zm)(e):e,validate:t=>{if(!t.length)return e}})},43716:function(e,t,n){"use strict";n.d(t,{TK:function(){return trackUploadAvatar},kw:function(){return trackProfileChange},mD:function(){return trackDeleteAccountConfirmationClick},sd:function(){return trackDeleteAccountClick},wv:function(){return trackLocationChange},y9:function(){return trackLangChange}});var a=n(57100);let trackLangChange=e=>(0,a.j)({amplitude:{name:"Switch Lang",params:{...e,permanent:!0}}}),trackLocationChange=e=>(0,a.j)({amplitude:{name:"Switch Location",params:{...e,permanent:!0}}}),trackUploadAvatar=()=>(0,a.j)({amplitude:{name:"Upload Avatar Picture"}}),trackProfileChange=()=>(0,a.j)({amplitude:{name:"Change Profile Information"}}),trackDeleteAccountClick=()=>{},trackDeleteAccountConfirmationClick=()=>{}},78954:function(e){e.exports={avatar:"Avatar_avatar__a5nP7"}},59184:function(e){e.exports={container:"InputAvatar_container__tGqi5",inputElement:"InputAvatar_inputElement__FgSLK",inputLabel:"InputAvatar_inputLabel__M1Yz3"}},20211:function(e){e.exports={datePicker:"InputDatePicker_datePicker__C_2Ud"}},10678:function(e){e.exports={container:"Listbox_container__sR8Kr",leftElement:"Listbox_leftElement__G_iwI",iconContainer:"Listbox_iconContainer__uxYum",button:"Listbox_button__hPn9n",buttonInError:"Listbox_buttonInError__0Vumz",buttonWithLeftElement:"Listbox_buttonWithLeftElement__4xS2j",caret:"Listbox_caret__iJsaD",caretOpen:"Listbox_caretOpen__oZxOp",options:"Listbox_options__SV0PS",option:"Listbox_option__JgcNo",optionWithLeftElement:"Listbox_optionWithLeftElement__PEaCQ"}},64864:function(e){e.exports={radioContainer:"Radio_radioContainer__UfD03",radio:"Radio_radio__dCIXF"}},92429:function(e){e.exports={toggle:"Switch_toggle__LcP4G",toggleOn:"Switch_toggleOn__2RxAG",toggleOff:"Switch_toggleOff__KTapq",togglePoint:"Switch_togglePoint__HX9NV",togglePointOn:"Switch_togglePointOn__lFB1r",togglePointOff:"Switch_togglePointOff__SpMZe"}},47543:function(e){e.exports={comboboxContainer:"Combobox_comboboxContainer__TAcWB",popover:"Combobox_popover__8KZ31",optionList:"Combobox_optionList__xmtAJ",option:"Combobox_option__mOPDO"}},44005:function(e){e.exports={searchItemContainer:"SearchItemWithSubtext_searchItemContainer__a3feY",searchItem:"SearchItemWithSubtext_searchItem__rGeNn",subtext:"SearchItemWithSubtext_subtext__kX_ky"}},82445:function(e){e.exports={layout:"MainLayout_layout__l0fks",main:"MainLayout_main__i5mr0",hideFooterOnMobile:"MainLayout_hideFooterOnMobile__1BncW"}},79499:function(e){e.exports={container:"ChangePassword_container__lrpzh",notice:"ChangePassword_notice__ahhVR"}},57180:function(e){e.exports={modalHeaderContainer:"DeleteConfirmationModal_modalHeaderContainer__x0Abp",modalBodyContainer:"DeleteConfirmationModal_modalBodyContainer__fMQOC",containerButton:"DeleteConfirmationModal_containerButton__Z0lUb"}},85990:function(e){e.exports={container:"Notifications_container__2XexB",row:"Notifications_row__0gcmp",textContainer:"Notifications_textContainer__8WDqx",notice:"Notifications_notice__Ai9Xg",containerSwitch:"Notifications_containerSwitch__cOj4n"}},9103:function(e){e.exports={radios:"PersonalInformation_radios__wNDPZ",inputs:"PersonalInformation_inputs__fWU3k",button:"PersonalInformation_button__GCRYn",avatar:"PersonalInformation_avatar__K5rcw",inputAvatar:"PersonalInformation_inputAvatar__fy1S5"}},75971:function(e){e.exports={button:"Settings_button__d_3iE",inputs:"Settings_inputs__cAFpm",item:"Settings_item__FbO7W"}},76846:function(e){e.exports={page:"account_page__N8o6K",section:"account_section__tktcr",lastSection:"account_lastSection__lTsqU"}}},function(e){e.O(0,[6342,3039,8948,9054,4432,9460,1404,2753,2102,5977,8965,8568,9147,6271,2696,2060,4479,9774,2888,179],function(){return e(e.s=3717)}),_N_E=e.O()}]);