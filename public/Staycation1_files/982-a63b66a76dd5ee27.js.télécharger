"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[982],{41121:function(e,t,n){n.d(t,{Cg:function(){return closedDates},DK:function(){return getAvailableDatesDuringSale},OF:function(){return getExperienceTextModal},Sj:function(){return formatExperienceDuration},TH:function(){return getExperienceClosedDatesDuringStayFilteredIfNotAvailableByDayLimits},ag:function(){return getExperienceName},g8:function(){return hasChildren},sA:function(){return shouldShowTag},yP:function(){return getExperienceTagLabel},zO:function(){return getExperienceClosedDatesDuringStay}});var i,r,a=n(83894),o=n(74201),c=n(39159),l=n(42699),u=n(313),s=n(82644),d=n(3151),g=n(51085),f=n(35337),D=n(69119),p=n(61690),v=n(63366),m=n(39049),h=n(59296);let y="dd/MM/yyyy",x="yyyy-MM-dd";function getExperienceName(e){let{experience:t,locale:n,translateFromServer:i,t:r}=e,{brand:a,duration:l,time:u,locations:s}=function(e){let{experience:t,locale:n,t:i}=e,{category:r,brand:a,duration:l,durationDescription:u,time:s,locations:d}=t;return{brand:a&&r.brand?a:void 0,duration:l&&u&&r.duration?formatExperienceDuration({duration:l,durationDescription:u,t:i}):void 0,time:s&&r.time?function(e){let{time:t,locale:n}=e,i=t.substring(0,5),r=(0,f.Z)(i,"HH:mm",new Date),a=(0,c.Z)(r),l=p.eP[n];return(0,o.Z)(r,a?"pppp":"p",{locale:l})}({time:s,locale:n}):void 0,locations:d&&r.locations?d:void 0}}({locale:n,experience:t,t:r}),d=i(t.category.name);return a&&(d="".concat(d," ").concat(a)),l&&(d="".concat(d," ").concat(l)),u&&(d="".concat(d," • ").concat(u)),s&&(d="".concat(d," • ").concat(s)),(0,m.zm)(d)}function getExperienceTextModal(e,t,n,i){if(!n)return t;let r=n.bookableDays.filter(e=>(0,s.Z)(new Date(e))||(0,g.Z)(new Date(e))),{availableDays:a,availableDates:c,closingPeriods:l}=e,u=l.filter(e=>r.some(t=>isDayIncludedInClosingPeriod(e,t))),d=c.filter(e=>r.includes(e)),f=0!==a.length&&7!==a.length;if(1===u.length&&!f&&!d.length){let e=u[0].start===u[0].end?i("hotel:experienceSection.unavailableOnDate",{date:(0,o.Z)(new Date(u[0].start),y)}):i("hotel:experienceSection.unavailableBetweenDates",{start:(0,o.Z)(new Date(u[0].start),y),end:(0,o.Z)(new Date(u[0].end),y)});return"".concat(t," • ").concat(e)}return 1!==d.length||u.length||f?u.length||f||d.length>1?"".concat(t," • ").concat(i("hotel:experienceSection.unavailableOnDates")):t:"".concat(t," • ").concat(i("hotel:experienceSection.availableOnDate",{date:(0,o.Z)(new Date(d[0]),y)}))}function getExperienceTagLabel(e,t,n){let{availableDates:i}=e;return t||1!==i.length?n(t?"hotel:experienceSection.notAvailableTag":"hotel:experienceSection.dependsOnDateTag"):n("hotel:experienceSection.dependsOnSingleDateTag",{date:(0,o.Z)(new Date(i[0]),"dd/MM")})}function getAvailableDatesDuringSale(e,t){let{availableDates:n,closingPeriods:i}=e,r=t.filter(e=>!i.some(t=>isDayIncludedInClosingPeriod(t,e))&&(!n.length||n.includes(e)));return r}function shouldShowTag(e,t,n){let i=0!==e.availableDays.length&&7!==e.availableDays.length,r=(0,v.vx)(n),a=!!t&&!!e.isClosed,o=!t&&!!r.length&&getAvailableDatesDuringSale(e,r).length!==r.length;return a||o||!t&&i}let closedDatesDuringClosingPeriods=(e,t,n)=>{let i=new Date(t),r=new Date(n),a=(0,p.wR)(i,r),o=e.availableDayLimits.includes(h.dW.CHECK_IN)&&e.closingPeriods.every(e=>!isDayIncludedInClosingPeriod(e,i)),c=e.availableDayLimits.includes(h.dW.CHECK_OUT)&&e.closingPeriods.every(e=>!isDayIncludedInClosingPeriod(e,r)),l=e.availableDayLimits.includes(h.dW.MID_STAY)?a.filter(t=>e.closingPeriods.some(e=>isDayIncludedInClosingPeriod(e,t))):a,u=[...o?[]:[i],...l,...c?[]:[r]];return u},closedDays=(e,t,n)=>{let{availableDays:i,availableDayLimits:r}=e,a=0===i.length||7===i.length;if(a)return[];let o=new Date(t),c=new Date(n),l=(0,p.wR)(o,c),u=r.includes(h.dW.CHECK_IN)&&i.includes((0,p.fk)(o)),s=r.includes(h.dW.CHECK_OUT)&&i.includes((0,p.fk)(c)),d=r.includes(h.dW.MID_STAY)?l.filter(e=>!i.includes((0,p.fk)(e))):l,g=[...u?[]:[o],...d,...s?[]:[c]];return g},closedDates=(e,t,n)=>{let{availableDayLimits:i,availableDates:r}=e,a=0===r.length;if(a)return[];let c=new Date(t),l=new Date(n),u=(0,p.wR)(c,l),s=i.includes(h.dW.CHECK_IN)&&r.includes((0,o.Z)(c,x)),d=i.includes(h.dW.CHECK_OUT)&&r.includes((0,o.Z)(l,x)),g=i.includes(h.dW.MID_STAY)?u.filter(e=>!r.includes((0,o.Z)(e,x))):u,f=[...s?[]:[c],...g,...d?[]:[l]];return f};function getExperienceClosedDatesDuringStay(e,t,n){let i=[...closedDates(e,t,n),...closedDatesDuringClosingPeriods(e,t,n),...closedDays(e,t,n)],r=i.filter((e,t,n)=>n.findIndex(t=>(0,d.Z)(t,e))===t).sort((e,t)=>(0,l.Z)(e,t)?1:-1);return r}function getExperienceClosedDatesDuringStayFilteredIfNotAvailableByDayLimits(e,t,n){let i=getExperienceClosedDatesDuringStay(e,t,n),{availableDayLimits:r}=e,a=new Date(t),o=new Date(n);return i.filter(e=>{let t=(0,d.Z)(e,a);if(t&&!r.includes(h.dW.CHECK_IN))return!1;let n=(0,d.Z)(e,o);if(n&&!r.includes(h.dW.CHECK_OUT))return!1;let i=(0,p.Kh)(e,a,o);return!i||!!r.includes(h.dW.MID_STAY)})}function formatExperienceDuration(e){let{duration:t,durationDescription:n,t:i}=e;switch(n){case"minutes":{if(t<60)return"".concat(t,"min");let e=Math.floor(t/60),n=t%60;return 0===n?"".concat(e,"h"):"".concat(e,"h").concat(n<10?"0".concat(n):"".concat(n))}case"hours":return"".concat(t,"h");case"half-days":return i("common:halfDay",{count:t});default:return i("common:day",{count:t})}}(i=r||(r={})).MINUTE="minutes",i.HOUR="hours",i.HALF_DAY="half-days",i.DAY="days";let hasChildren=e=>e.children>0,isDayIncludedInClosingPeriod=(e,t)=>!(0,l.Z)((0,D.Z)(new Date(e.start)),(0,D.Z)(new Date(t)))&&!(0,u.Z)((0,a.Z)(new Date(e.end)),(0,D.Z)(new Date(t)))},90982:function(e,t,n){n.d(t,{Cb:function(){return getNightCountFromQueryParams},Ec:function(){return getPricesDisplayForPackages},G7:function(){return getDrawerTypeForTracking},HU:function(){return isNewPackage},In:function(){return getPackageRooms},K9:function(){return getIncludedAndExtraExperience},Ku:function(){return formatDisclaimers},Mo:function(){return getPackageDistanceToCity},PL:function(){return isExperiencePartiallyClosedDuringStay},QP:function(){return getBestAvailability},U1:function(){return showNewPackageLabel},UZ:function(){return hotelNameFromPackage},We:function(){return experiencesFiltering},X$:function(){return createDistinctCoordsPackages},Xz:function(){return getShortPriceDescription},_e:function(){return isAvailable},a1:function(){return p},d7:function(){return calculateDiscountAmount},dx:function(){return isLowStock},fL:function(){return getDiscount},fX:function(){return hasDiscountPackages},gN:function(){return packageTitle},gd:function(){return getIncludedAndExtraExperienceFromDateAndTime},hN:function(){return checkIsPackageMultiNight},iA:function(){return getExtraExperiencesDescription},jI:function(){return formatHotelName},og:function(){return formatPackageDiscount}});var i=n(77349),r=n(92300),a=n(67803),o=n(11052),c=n(35337),l=n(61690),u=n(36190),s=n(20214),d=n(6765),g=n(63366),f=n(67341),D=n(41121);let p=/\d/g,v=String.fromCharCode(160),isAvailable=e=>{var t;return null===(t=e.availability)||void 0===t?void 0:t.isAvailable},isLowStock=e=>{var t,n,i;return(null===(t=e.availability)||void 0===t?void 0:t.isAvailable)&&(null===(n=e.availability)||void 0===n?void 0:n.stock)<=3&&(null===(i=e.availability)||void 0===i?void 0:i.stock)>0},isNewPackage=e=>!!e.publishedAt&&60>=(0,a.Z)(new Date,new Date(e.publishedAt)),formatDisclaimers=e=>{let t=e.filter(e=>"ADVICE"===e.kind).sort((e,t)=>e.priority-t.priority).map(e=>e.text),n=e.filter(e=>"ALERT"===e.kind).sort((e,t)=>e.priority-t.priority).map(e=>e.text);return[t,n]},isExperienceDuringClosedDates=(e,t,n)=>{let i=(0,r.Z)(new Date(n),new Date(t));return(0,D.Cg)(e,t,n).length>i},isExperienceClosedDuringStay=(e,t,n)=>{let i=(0,r.Z)(new Date(n),new Date(t)),a=(0,D.zO)(e,t,n);return a.length>i},isExperiencePartiallyClosedDuringStay=(e,t,n)=>{let i=(0,r.Z)(new Date(n),new Date(t)),a=(0,D.TH)(e,t,n);return!!a.length&&a.length<=i},addOnIsClosedForCheckIn=(e,t)=>(0,o.Z)(new Date(t),new Date)<e,getIncludedAndExtraExperienceFromDateAndTime=(e,t,n,r,a,o)=>getIncludedAndExtraExperience(e,t&&(0,c.Z)(n,"HH:mm:ss",new Date(t)).toString(),t&&(0,c.Z)(r,"HH:mm:ss",(0,i.Z)(new Date(t),a)).toString(),o),getIncludedAndExtraExperience=(e,t,n,i)=>{let{included:r,extras:a}=e.reduce((e,r)=>{let a=(0,g.vx)(i),o=t&&n,c=o&&isExperienceDuringClosedDates(r,t,n)||!o&&!!a.length&&!(0,D.DK)(r,a).length,l=!r.included&&r.closedHoursBeforeCheckin&&t&&addOnIsClosedForCheckIn(r.closedHoursBeforeCheckin,t);if(l||c)return e;let u=o&&isExperienceClosedDuringStay(r,t,n);return r.included?e.included.push({...r,isClosed:!!u}):e.extras.push({...r,isClosed:!!u}),e},{included:[],extras:[]});return r.sort((e,t)=>e.priority-t.priority),a.sort((e,t)=>e.priority-t.priority),{includedExperiences:r,extraExperiences:a}},getPackageRooms=(e,t,n)=>{let i=n?e:null;return t.filter(e=>{if(i){var t;return null===(t=e.availabilities)||void 0===t?void 0:t.find(e=>e.date===i)}return!0})},getShortPriceDescription=(e,t)=>"per stay"===t?e("hotel:suffix.perStayShort"):"/pers."===t?e("hotel:suffix.perPersonShort"):t,getExtraExperiencesDescription=e=>{let{experiences:t,currency:n,locale:i,t:r,translateFromServer:a,roundingPrice:o}=e,c=o?"hotel:extrasSection.prefix_interval_rounded":"hotel:extrasSection.prefix_interval";return t.map(e=>{let{id:t,price:l,category:s,emoji:g}=e,f=o||!(0,d.u)(l)?0:2,p=(0,u.hF)(r(c,{postProcess:"interval",count:l,value:l,currency:n,locale:i,minimumFractionDigits:f})),v=getShortPriceDescription(r,e.priceDescription),m=e.pictures.length?"imageWithEmoji":"emoji";return{id:t,prefix:"".concat(p).concat(v?" ".concat(v):""),text:(0,D.ag)({experience:e,t:r,translateFromServer:a,locale:i}),type:m,pictureId:g.pictureId,alt:g.alt||s.name,element:e}})},getBestAvailability=e=>{let t=null==e?void 0:e.rooms.map(e=>e.availabilities).flat(),n=null==t?void 0:t.some(e=>e.isAvailable),i=null==t?void 0:t.filter(e=>!n||!!e.isAvailable);return null==i?void 0:i.reduce((e,t)=>null===e||t.discountPrice<e.discountPrice?t:e,i[0])},getPricesDisplayForPackages=e=>{let{availability:t,isAuthenticated:n,isSalesOpen:i,t:r,currencyTranslation:a,locale:o,nightCount:c,isDayPackage:l,adults:u}=e;if(!t)return{price:void 0,discount:void 0,perNightTranslation:void 0,priceTranslation:void 0,priceCrossed:void 0,discountAmount:void 0};let{discount:s,discountPrice:d,price:g}=t;if(!(0,f.$K)(d)||!(0,f.$K)(g))return{price:void 0,discount:void 0,perNightTranslation:void 0,priceTranslation:void 0,priceCrossed:void 0,discountAmount:void 0};let D=s>0?formatPackageDiscount(s,r,o):void 0;if(!n&&!l)return{price:s>0?r("offers:common.upTo"):void 0,discount:D,perNightTranslation:void 0,priceTranslation:void 0,priceCrossed:void 0,discountAmount:void 0};let p="common:currency_rounded",v=a(p,{value:d}),m=s>0?a(p,{value:g}):void 0,h=calculateDiscountAmount(g,d,a),y={priceCrossed:m,discount:D,priceTranslation:r("hotel:suffix.forXpers",{nbPers:u}),discountAmount:h};if(!i||!t.isAvailable){let e=a("common:package.priceUnauthenticatedPrefix_rounded",{value:d});return{price:e,perNightTranslation:r("offers:common.perNight",{count:1}),...y}}return{price:v,perNightTranslation:r("offers:common.perNight",{count:c}),...y}};function getPackageDistanceToCity(e,t){if(!(0,s.D1)(e.location,t))return(0,s.JL)(e.location.coords,t.coords)}function getDiscount(e){if(e&&!(e.discount<=0))return e.discount}let calculateDiscountAmount=(e,t,n)=>{if(!(0,f.$K)(e)||!(0,f.$K)(t)||e<=t)return;let i=e-t;return n("common:currency_rounded",{value:i})},formatPackageDiscount=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e)return t("common:package.discountPercentage",{value:e,locale:n,maximumFractionDigits:i,style:"percent"})},checkIsPackageMultiNight=e=>{let{checkin:t,checkout:n}=e;if(!(0,l.qb)(t)||!(0,l.qb)(n))throw Error("Date is not correct");return(0,r.Z)(new Date(n),new Date(t))>1},getDrawerTypeForTracking=e=>{switch(e){case"timetable":return"Hours";case"howToAccess":return"Location";case"services":return"Services";case"experience":return"Experience";case"myPayment":return"Payment";default:(0,f.vE)(e)}},hasDiscountPackages=e=>e.results.some(e=>{var t;return(null===(t=e.availability)||void 0===t?void 0:t.discount)!==0})||e.extras.some(e=>{var t;return(null===(t=e.availability)||void 0===t?void 0:t.discount)!==0})||e.unavailables.some(e=>{var t;return(null===(t=e.availability)||void 0===t?void 0:t.discount)!==0})||e.soldout.some(e=>{var t;return(null===(t=e.availability)||void 0===t?void 0:t.discount)!==0}),experiencesFiltering=(e,t)=>{let n=null==e?void 0:e.map(e=>t(e));return n||[]},hotelNameFromPackage=e=>e.slice(e.indexOf("•")+1,e.length).trim(),formatHotelName=e=>{let{pkgName:t,stars:n,aliasForUser:i,dayPackage:r=!1}=e,a=0===n?"":"".concat(v).concat("*".repeat(n)),o="".concat(hotelNameFromPackage(t)).concat(a);if(r)return o;let c=i?" • ".concat(i):"";return"".concat(o).concat(c)},packageTitle=e=>{let{experienceTitle:t,dayPackage:n,name:i,aliasForUser:r,stars:a=0}=e,o=formatHotelName({pkgName:i,stars:a,aliasForUser:r,dayPackage:n});return n&&t?"".concat(t," • ").concat(o):o},getNightCountFromQueryParams=(e,t)=>t?0:e&&e>0?e:1,random=(e,t)=>Math.random()*(t-e)+e,createDistinctCoordsPackages=e=>e.map(t=>{let n=null==e?void 0:e.find(e=>e.slug!==t.slug&&e.location.coords.lat===t.location.coords.lat&&e.location.coords.lng===t.location.coords.lng);if(n){let e={...t.location,coords:{lat:t.location.coords.lat+random(-.0003,3e-4),lng:t.location.coords.lng+random(-.0003,3e-4)}};return{...t,location:e}}return t}),showNewPackageLabel=(e,t)=>e<10&&t<8},63366:function(e,t,n){n.d(t,{Se:function(){return isSaleOpen},X8:function(){return getIsSalesOpen},vx:function(){return getFutureBookableDays}});var i=n(82644),r=n(51085),a=n(24257);let getIsSalesOpen=(e,t)=>{let n=e.find(e=>e.countryId===t);return!!n&&isSaleOpen(n)},isSaleOpen=e=>{let{startDate:t,endDate:n,open:i}=e;return!!i&&(0,a.Z)(new Date,{start:new Date(t),end:new Date(n)})},getFutureBookableDays=e=>{var t;return null!==(t=null==e?void 0:e.bookableDays.filter(e=>(0,i.Z)(new Date(e))||(0,r.Z)(new Date(e))))&&void 0!==t?t:[]}}}]);